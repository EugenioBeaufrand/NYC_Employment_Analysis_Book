[["index.html", "NYC Employment Analysis Chapter 1 Introduction", " NYC Employment Analysis Xinyi Liu, Eugenio Beaufrand 2020-12-07 Chapter 1 Introduction "],["data-sources.html", "Chapter 2 Data sources 2.1 Process of Data Collection 2.2 Logistics of Data Collection 2.3 Basic Information of Datasets", " Chapter 2 Data sources There are four parts of our datasets, namely, number of employed, salary, education and gdp. 2.1 Process of Data Collection List Variables * List variables related to employment conditions in New York City, for example, GDP in New York City, occupations, races, ages, genders, education levels, etc. Search with Keywords * Search these key words in google and filter suitable data sources. Select the website * Find a suitable website for reliable data, in our project, most of the data are from: United States Census (https://data.census.gov/cedsci/). Filter the Data * Use the Advanced Search function in the website to filter the data we are interested in. 2.2 Logistics of Data Collection Authority * Find more official data sources. For example, we came across multiple data sources with the data we want during the searching process, but finally, we selected United States Census, which is the most authoritative one. Primitive Find the most primitive data source. For example, some websites provide data that have been processed. At this time, we will look for more primitive data sets and analyze the original data. Relevance Find the data tables that can show connections between variables. For later analysis, we need to get rid of over summarizing and find the data that can show the relationship between different variables, which requires as many variables as possible in the same data table. Unity Find the website that includes variety aspects of data. It can make the data in different databases more unified. For example, the data can be obtained with a unified data acquisition method in one website, and this will facilitate subsequent data analysis. 2.3 Basic Information of Datasets 2.3.1 numemp Datasets 2.3.1.1 Sources of numemp In our project, we use numemp to represent Number of Employed. The data is divided into different sub-datasets according to years and races. The year range is from 2010 to 2019, and the races include White Alone, Black or African American Alone, Asian Alone, Some Other Race Alone, Two or More Races, White Alone Not Hispanic or Latino, and Hispanic or Latino. The raw data of numemp is attached to the following Github repo: https://github.com/tracy3057/STAT5702_NYC_Employment_Analysis/tree/main/RawData/numemp The origin data source urls are provided in: https://github.com/tracy3057/STAT5702_NYC_Employment_Analysis/blob/main/RawData/numemp/datasource.txt 2.3.1.2 Basic Information Each sub-dataset includes 73 records and 6 variables. Variable names Types of Variables Types of Variables Label Character Occupation Type Bronx County, New York / Estimate Numeric Number of Employed in Bronx County Kings County, New York / Estimate Numeric Number of Employed in Kings County New York County, New York / Estimate Numeric Number of Employed in New York County Queens County, New York / Estimate Numeric Number of Employed in Queens County Richmond County, New York / Estimate / Estimate Numeric Number of Employed in Richmond County Take the data for White Alone in year 2019 as an example, the form of each dataset is as follows: ### salary Datasets #### Sources of salary The data is divided into different sub-datasets according to years. The year range is from 2010 to 2019. The raw data of numemp is attached to the following Github repo: https://github.com/tracy3057/STAT5702_NYC_Employment_Analysis/tree/main/RawData/salary/CountySalary The origin data source urls are provided in: https://github.com/tracy3057/STAT5702_NYC_Employment_Analysis/blob/main/RawData/salary/datasource.txt 2.3.1.3 Basic Information Each sub-dataset includes 73 records and 6 variables. Variable names Types of Variables Types of Variables Label Character Occupation Type Bronx County, New York!!Estimate Character Salary in Bronx County Kings County, New York!!stimate Character Salary in Kings County New York County, New York!!Estimate Character Salary in New York County Queens County, New York!!Estimate Character Salary in Queens County Richmond County, New York!!Estimate!!Estimate Character Salary in Richmond County ps: The salary data has the data type of character due to the , in data. Take the data for in year 2019 as an example, the form of each dataset is as follows: ### education Datasets #### Sources of education The data is divided into different sub-datasets according to years. The year range is from 2010 to 2019. The raw data of numemp is attached to the following Github repo: https://github.com/tracy3057/STAT5702_NYC_Employment_Analysis/tree/main/RawData/education The origin data source urls are provided in: https://github.com/tracy3057/STAT5702_NYC_Employment_Analysis/blob/main/RawData/education/datasource.txt 2.3.1.4 Basic Information For education dataset, the organization of data has small differences by years. The sub-datasets from 2010 to 2014 use the same organizing method, the sub-datasets from 2015 to 2018 use the same organizing method, the sub-dataset in 2019 use another organizing method. year 2010 to 2014 From year 2010 to 2014, each sub-dataset includes 41 records and 19 variables. The first column is named Label, it shows the names of different education levels. The type of this column is character. The other columns include the information of percentages of different education levels in different counties. The type of these columns are character. ps: The salary data has the data type of character due to the , and % in data. Take the data for in year 2010 as an example, the form of each dataset is as follows: year 2015 to 2018 From year 2015 to 2018, each sub-dataset includes 68 records and 37 variables. The first column is named Label, it shows the names of different education levels. The type of this column is character. The other columns include both percentages and exact number of different education levels in different counties. The type of these columns are character. ps: The salary data has the data type of character due to the , and % in data. Take the data for in year 2010 as an example, the form of each dataset is as follows: year 2019 In year 2019, each sub-dataset includes 68 records and 19 variables. The first column is named Label, it shows the names of different education levels. The type of this column is character. The other columns include the exact number of different education levels in different counties. The type of these columns are character. ps: The salary data has the data type of character due to the , in data. Take the data for in year 2010 as an example, the form of each dataset is as follows: ### gdp Datasets #### Sources of gdp For gdp dataset, we include GDP per capita in both USA and NYC. The raw data of gdp is attached to the following Github repo: https://github.com/tracy3057/STAT5702_NYC_Employment_Analysis/tree/main/RawData/gdp The origin data source urls are provided in: https://github.com/tracy3057/STAT5702_NYC_Employment_Analysis/blob/main/RawData/gdp/datasource.txt 2.3.1.5 Basic Information Each sub-dataset includes 10 records and 3 variables. Variable names Types of Variables Types of Variables year Numeric year 2010 - 2019 NYC GDP per capita Numeric NYC GDP per capita in different years USA GDP per capita Numeric USA GDP per capita in different years The form of gdp dataset is as follows: ## Problems with Data In the process of processing data, we encounter 5 major problems. ### Inconsistency in Occupation Names When visualizing numemp dataset, we discover that for the occupation of Fire fighting and prevention, and other protective service workers including supervisors and Education, training, and library occupations, the value of some years were 0. Therefore, we came back to the origin dataset to check. We discover that for Fire fighting and prevention, and other protective service workers including supervisors, they are named with Firefighting and prevention, and other protective service workers including supervisors in some years, where Fire fighting is different from Firefighting. Also, for Education, training, and library occupations, they are named with Educational instruction, and library occupations in some years, where training is different from instruction in character level. Therefore, we unified these differences and solved this problem. ### Formating Problem Caused by File Download For the datasets online, there is an inclusion relationship between the values for Label. As is shown in the example below. However, after downloading the dataset, we cannot maintain this inclusion relationship. Instead, this relation is reflected by different numbers of spaces in each cell, which increases the difficulty of data processing. As is shown in the example below. Also, the downloaded version of dataset does not have suitable column names, for it always combine the title and subtitle together. Therefore, we need to rename each column. ### Differences of Table Organizing Methods in Different Years. In the education dataset, the organization of data table in differen years are different. Sometimes we need to multiply percentages by total amount of people in order to get the the number of people with some specific education levels. Sometimes we can use the number of people directly. Therefore, we need to analyze the organizing methods in different years first, then do the data process correspondingly. ### Characters in Numbers In salary dataset and education dataset, there are , and % in numbers in raw data. We need to delete the characters and do some numerical conversions for the percentile. #### Different Expressions of NAs In some data tables, NAs are represented as (X) or -. We paid attention to the different representations and replaced them with NA for further processing. "],["data-transformation.html", "Chapter 3 Data transformation", " Chapter 3 Data transformation "],["missing-values.html", "Chapter 4 Missing values 4.1 ‘numemp’ dataset 4.2 ‘salary’ dataset", " Chapter 4 Missing values There are some missing values in the numemp (short for number of employed) dataset and salary dataset. We analyzed the missing data based on the mi package in r and pre-processed the missing values based on jupyter notebook. 4.1 ‘numemp’ dataset 4.1.1 Missing Value Analysis 4.1.1.1 Initial Analysis First, we analyzed the origin version of the dataset, the form of this dataset is as follows. There are nine columns in this dataset. The Bronx County, New York, Kings County, New York, New York County, New York, Queens County, New York and Richmond County, New York provide us with the number of employed in the corresponding county. The Occupations, year, race and Gender columns give us information of each observation. For analysis convenience, we set the Occupations, year, race and Gender columns to NULL, so that we can focus on the missing values of number of employed in different groups. ## NOTE: In the following pairs of variables, the missingness pattern of the first is a subset of the second. ## Please verify whether they are in fact logically distinct variables. ## [,1] [,2] ## [1,] &quot;Bronx.County..New.York&quot; &quot;Richmond.County..New.York&quot; ## [2,] &quot;New.York.County..New.York&quot; &quot;Richmond.County..New.York&quot; From this plot, we can see that there are missing values in Bronx County, New York, New York County, New York and Richmond County, New York. Also, the majority of the missing values are in Richmond County, New York. For some observations, all of the three values are missing. 4.1.1.2 Further Analysis In order to find a better way to deal with the missing data, we do a further analysis on the missing values. * First, we combine the information of counties and races and use the their combinations as new columns. Second, we see the ratio of the number of NAs in each column. ## Bronx _ Asian Kings _ Asian ## 0.0 0.0 ## NY _ Asian Queens _ Asian ## 0.0 0.0 ## Richmond _ Asian Bronx _ African ## 0.2 0.0 ## Kings _ African NY _ African ## 0.0 0.0 ## Queens _ African Richmond _ African ## 0.0 0.8 ## Bronx _ Hispanic Kings _ Hispanic ## 0.0 0.0 ## NY _ Hispanic Queens _ Hispanic ## 0.0 0.0 ## Richmond _ Hispanic Bronx _ Other ## 0.0 0.0 ## Kings _ Other NY _ Other ## 0.0 0.0 ## Queens _ Other Richmond _ Other ## 0.0 1.0 ## Bronx _ Above2 Kings _ Above2 ## 0.6 0.0 ## NY _ Above2 Queens _ Above2 ## 0.2 0.0 ## Richmond _ Above2 Bronx _ White ## 1.0 0.0 ## Kings _ White NY _ White ## 0.0 0.0 ## Queens _ White Richmond _ White ## 0.0 0.0 ## Bronx _ White_not_Hisp. Kings _ White_not_Hisp. ## 0.0 0.0 ## NY _ White_not_Hisp. Queens _ White_not_Hisp. ## 0.0 0.0 ## Richmond _ White_not_Hisp. ## 0.0 As can be seen from the result, all values in group Richmond _ Above2 and group Richmond _ Other are missing. Missing values also appears in Richmond _ Asian, Richmond _ African, Bronx _ Above2 and NY _ Above2. It also shows that the type of these missing data is Missing at Random (MAR), because most of the missing values are in some specific groups. As we can discover, most of the missing values are in the race group of Two or More Races. It might be because very limited amount of people are in this race group, so sometimes it is hard to do effective statistic for this group. Then, we use mi package to visualize the NAs. ## NOTE: In the following pairs of variables, the missingness pattern of the second is a subset of the first. ## Please verify whether they are in fact logically distinct variables. ## [,1] [,2] ## [1,] &quot;Richmond _ Other&quot; &quot;Bronx _ Above2&quot; ## [2,] &quot;Richmond _ Other&quot; &quot;NY _ Above2&quot; This visualization shows us that there is no strong pattern of the missing values in each observation. 4.1.2 Pre-process Missing Values Based on the patterns of missing values, we apply different data pre-preprocess methods to different groups of missing values. Below is our strategies for different groups. 1. group Richmond _ Above2 and group Richmond _ Other * Strategy: For the missing values in group Richmond _ Above2 (‘Richmond County’ and ‘Two or more races’) and group Richmond _ Other (Richmond County and ‘Some Other Race Alone’), we fill the NAs with 0. * Reason: All the values in this group are missing, including values of both genders and all years, so we cannot find a suitable value to represent the missing value. 2. missing values in Bronx County, New York, New York County, New York and Richmond County, New York * Strategy: First, we group the dataset by Occupations, race, and Gender, then we calculate the mean value of different years and use that mean value to represent the NAs under each county. * Reason: For each combination of Occupation, race and Gender in these counties, there are always some valid data in some years. Therefore, we use the average value of the available years in corresponding groups to represent the missing values. The code of filling missing data in numemp dataset is attached below. https://github.com/tracy3057/STAT5702_NYC_Employment_Analysis/blob/main/DataPreprocessing/Code/NumEmp/PreprocessMissingValues.ipynb 4.2 ‘salary’ dataset 4.2.1 Missing Value Analysis 4.2.1.1 Initial Analysis We also analyzed the origin version of this dataset first, the form of this dataset is as follows. There are eight columns in this dataset. The Bronx County, New York, Kings County, New York, New York County, New York, Queens County, New York and Richmond County, New York provide us with the number of employed in the corresponding county. The Occupations, year, and Gender columns give us information of each observation. For analysis convenience, we set the Occupations, year and Gender columns to NULL, so that we can focus on the missing values of number of employed in different groups. ## NOTE: In the following pairs of variables, the missingness pattern of the first is a subset of the second. ## Please verify whether they are in fact logically distinct variables. ## [,1] [,2] ## [1,] &quot;Bronx.County..New.York&quot; &quot;Richmond.County..New.York&quot; ## [2,] &quot;Kings.County..New.York&quot; &quot;Richmond.County..New.York&quot; ## [3,] &quot;New.York.County..New.York&quot; &quot;Richmond.County..New.York&quot; ## [4,] &quot;Queens.County..New.York&quot; &quot;Richmond.County..New.York&quot; From this plot, we can see that there are missing values in Kings County, New York, Queens County, New York and Richmond County, New York. Also, the majority of the missing values are in Richmond County, New York. In some observations, all of the three values are missing. 4.2.1.2 Further Analysis In order to find suitable strategies for dealing with missing data in salary dataset, we change the form of salary dataset. To be specific, we set columns to be years. Each observation shows the corresponding salary of some certain combination of occupation and gender from 2010 to 2019. We do this rearrangement to see if there is a situation that for some specific combination of occupation and gender, all values are missing from 2010 to 2019. * First, we change the shape of our dataset. ## NOTE: In the following pairs of variables, the missingness pattern of the second is a subset of the first. ## Please verify whether they are in fact logically distinct variables. ## [,1] [,2] ## [1,] &quot;2013&quot; &quot;2018&quot; As can be seen from this plot, the majority of missing values concentrate in several observations. We picked these rows out to see if there’s some observations in which all values are missing. * Second, we picked out the rows with NAs to see the percentages of the missing values. As can be seen in the result, for the majority of observations with missing values, there are still some valid values there in some certain years. However, there are two rows where all values are missing. Therefore, we pick out the two rows to see their information in detail. * Third, we pick out the rows in which all values are missing. ## # A tibble: 1 x 13 ## Occupations Gender county `2010` `2011` `2012` `2013` `2014` `2015` `2016` ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Farming, f… Male Richm… NA NA NA NA NA NA NA ## # … with 3 more variables: `2017` &lt;dbl&gt;, `2018` &lt;dbl&gt;, `2019` &lt;dbl&gt; ## # A tibble: 1 x 13 ## Occupations Gender county `2010` `2011` `2012` `2013` `2014` `2015` `2016` ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 Farming, f… Female Richm… NA NA NA NA NA NA NA ## # … with 3 more variables: `2017` &lt;dbl&gt;, `2018` &lt;dbl&gt;, `2019` &lt;dbl&gt; As can be seen from the result, the two groups are the male and female in farming, fishing, and forestry occupations in Richmond County. Therefore, for subsequent data pre-process of these two groups, we cannot use the average of other years to replace the missing values. Instead, we will use the average salary of other counties in the same occupation, year, gender group to represent the missing values in farming, fishing, and forestry occupations in Richmond County. 4.2.2 Pre-process Missing Values According to the analysis above, we follow the following steps to do data pre-process. 1. Divide the salary dataset by county. 2. Under each sub-dataset, we group the dataset by Occupations, gender and year, then we calculate the group mean of each group and use the mean values to replace missing values. 3. For some occupations, the salary values of one gender are completely missing. For these occupations, we group the dataset by Occupations and year, and use the group mean to repalce the missing values. 4. Combine the data of each sub-dataset together. 5. For farming, fishing, and forestry occupations in Richmond County, where all values are missing, we plan to use the average salary of other counties in the same occupation, year, gender group to represent the missing values. Therefore, we group the combined dataset by Occupations, gender, county and year. Then we use the group average to replace the missing values. The code of filling missing data in numemp dataset is attached below. https://github.com/tracy3057/STAT5702_NYC_Employment_Analysis/blob/main/DataPreprocessing/Code/Salary/Preprocess_MissingValue.ipynb "],["results.html", "Chapter 5 Results", " Chapter 5 Results "],["interactive-component.html", "Chapter 6 Interactive component", " Chapter 6 Interactive component "],["conclusion.html", "Chapter 7 Conclusion", " Chapter 7 Conclusion "]]
